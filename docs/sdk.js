(()=>{"use strict";let e;var t={},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.rv=function(){return"1.1.8"},r.ruid="bundler=rspack@1.1.8";let o="\\p{Extended_Pictographic}",a="\\p{Emoji_Modifier}",i="".concat("\\p{Regional_Indicator}","{2}|").concat(o,"\\uFE0F?").concat(a,"?(\\u200D").concat(o,"\\uFE0F?").concat(a,"?)*"),c="\\((!?)([kqbnrp])(\\d?)\\)",s="[-~]?(\\*\\d)?(".concat("[kqbnrpcxstadg]","|").concat("'(".concat(i,"|[^'])|''.."),")"),l=RegExp("^(?:".concat(i,")$"),"u"),u=RegExp("^(?:".concat(c,"|").concat(s,")$"),"iu"),d=RegExp("\\/|\\d+|".concat(c,"|").concat(s,"|."),"iug");function f(e){let t=e[0];for(let n=1;n<e.length;n++)if(e[n]!=t)return!1;return!0}function g(e,t,n){return e.match(/^-?(\*\d)?[sng]$/i)?(t?(n&&(e=e.replace("s","g").replace("S","G")),e=e.replace("n","s").replace("N","S")):(n&&(e=e.replace("s","n").replace("S","N")),e=e.replace("g","s").replace("G","S")),e):e}function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:BOARD_SIZE;return void 0===t&&(t=e%BOARD_SIZE,e=(e-t)/BOARD_SIZE),String.fromCharCode(CHAR_A_OFFSET+t)+(n-e)}function h(e){return Array.from({length:e},e=>"")}let m={pattern:void 0,bg:void 0,exHigh:!0,border:"1",blackWhite:!1,knightOffset:.6,SN:!1,size:44,w:8,h:8,fullFEN:!1,coordinates:!1,set:"1echecs",collapse:!0},b=/^\d+(,\d+)*$/,E=[26,32,38,44],x=["1echecs","alpha","goodCompanion","kilfiger","merida","mpchess","skak"],N=document.currentScript,S="img[fen]",k=document.createElement("iframe");function w(t){let n=new MessageChannel;n.port1.onmessage=n=>{t.src=n.data,t.title=e.getTitle(r,t.dataset)};let r=t.getAttribute("fen"),o=function(e){let t=Object.assign({},m);if(e){let n=Number(e.size);E.includes(n)&&(t.size=n),e.set&&x.includes(e.set)&&(t.set=e.set),e.border=function(e){if("string"==typeof e){if((e=e.replace(/\D/g,",").replace(/,+/g,",").replace(/^,/,"").replace(/,$/,"")).match(b))return e}}(e.border),e.border&&(t.border=e.border),e.knightOffset&&0<e.knightOffset&&e.knightOffset<1&&(t.knightOffset=e.knightOffset),t.blackWhite=!!e.blackWhite,t.pattern=e.pattern,t.bg=e.bg,t.SN=e.SN||!1;let r=Math.floor(Number(e.w)),o=Math.floor(Number(e.h));r>0&&(t.w=r),o>0&&(t.h=o)}return t}(Object.assign({},e.getDefault(),t.dataset)),a=function(e){let t=e.match(d)||[],n=[0],r=0;for(let e of t)"/"==e?n[++r]=0:e.match(/^\d+$/)?n[r]+=Number(e):n[r]++;let o=n.length;if(1!=o){if(f(n))return{w:n[0],h:o}}}(r);a&&Object.assign(o,a);let{w:i,h:c}=function(e,t){let n=function(e){let t=e.split(",").map(e=>{let t=Number(e);return isNaN(t)?0:Math.abs(Math.floor(t))}),n=t.reduce((e,t)=>e+t,0);return{array:t,size:n}}(e.border),r=e.coordinates?{x:20,y:20}:{x:0,y:0};!1===t&&(r.x=0);let o=e.w*e.size+2*n.size+r.x,a=e.h*e.size+2*n.size+r.y,i={x:n.size+r.x,y:n.size};return{w:o,h:a,border:n,offset:i,margin:r}}(o);t.width=i,t.height=c,k.contentWindow.postMessage({fen:r,options:o},"*",[n.port2])}function v(e){e instanceof Element&&(e.matches(S)?w(e):e.querySelectorAll(S).forEach(e=>w(e)))}async function O(t){let n=new URL(N.src).origin,r=new URL(n+"/fen-tool/api/");e=t,document.head.appendChild(k),await new Promise(e=>{let t=n=>{n.source==k.contentWindow&&(removeEventListener("message",t),e())};addEventListener("message",t),k.src=r.toString()});let o=document.documentElement;new MutationObserver(e=>{for(let t of e)if("attributes"==t.type){let e=t.attributeName.toLowerCase(),n=e.startsWith("data");t.target==N&&n&&v(document.body),"IMG"==t.target.nodeName&&("fen"==e||n)&&w(t.target)}else for(let e of t.addedNodes)v(e)}).observe(o,{childList:!0,attributes:!0,subtree:!0}),v(o)}k.style.display="none";let y=document.currentScript;O({getDefault:()=>y.dataset,getTitle:e=>e+"\n\nGenerated by https://mutsuntsai.github.io/fen-tool"})})();