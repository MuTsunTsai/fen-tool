const globalOptions=document.currentScript.dataset,frame=document.createElement("iframe");frame.style.display="none",document.body.appendChild(frame);const frameReady=new Promise((e=>{const t=n=>{n.source==frame.contentWindow&&(removeEventListener("message",t),e())};addEventListener("message",t),frame.src="https://mutsuntsai.github.io/fen-tool/api/"}));async function init(){await frameReady,document.querySelectorAll("img[fen]").forEach((e=>{const t=new MessageChannel;t.port1.onmessage=t=>{e.src=t.data};const n=e.getAttribute("fen"),a=Object.assign({},globalOptions,e.dataset);frame.contentWindow.postMessage({fen:n,options:a},"*",[t.port2])}))}init();